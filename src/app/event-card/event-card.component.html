<div>
  <data-area [settings]="area"></data-area>
  <div
    style="
      display: flex;
      justify-content: space-between;
      flex-direction: row-reverse;
    "
  >
    <div>
      <button
        mat-raised-button
        color="primary"
        (click)="sortByDistance()"
        *ngIf="showLocation"
      >
        {{
          !volunteerLocation
            ? 'למעבר לתצוגה לפי מרחק'
            : 'למעבר לתצוגה לפי תאריך'
        }}
      </button>
    </div>
  </div>
  <mat-divider></mat-divider>
</div>
<div>
  <div *ngFor="let d of dates">
    <ng-container *ngIf="hasEvents(d)">
      <h3>{{ d.date }}</h3>
      <div class="events-container" [transition-group]="'flip-list'">
        <ng-container *ngFor="let e of d.events; trackBy: trackBy">
          <mat-card
            transition-group-item
            class="event-card"
            [class.registered]="isRegisteredToEvent(e) && showingAllTasks"
            *ngIf="filter(e)"
          >
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
              "
            >
              <strong (click)="eventDetails(e)">
                {{ e.title }}
              </strong>
              <app-dots-menu
                [item]="e"
                [buttons]="menuOptions"
                *ngIf="isDispatcher()"
              ></app-dots-menu>
            </div>
            <div class="event-info" (click)="eventDetails(e)">
              <div class="event-detail">
                {{ e.category?.caption || '' }} {{ distance(e) }} - ({{
                  e.externalId
                }})
                <span>
                  {{ eventCity(e) }}
                  <span *ngIf="e.toAddressApiResult">
                    => {{ eventToCity(e) }} ({{ travelDistance(e) }})</span
                  >
                </span>
                <div>
                  <strong>{{ displayDate(e) }}</strong>
                </div>

                <a *ngIf="!isFull(e)">{{ 'לפרטים והרשמה' }}</a>
                <strong *ngIf="isFull(e)">
                  {{ e.taskStatus.caption }}
                </strong>
              </div>
            </div>
          </mat-card>
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>
